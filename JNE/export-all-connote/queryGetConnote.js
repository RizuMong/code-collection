var dataConnote = [
  {
    adjusted_amount_number: "10000",
    awb_date: "1-May-24",
    awb_number: "'TLJR3D8J7QY97PEV",
    branch_id: "CGK",
    branch_name: "JNE JAKARTA",
    branch_type: "CABANG UTAMA JNE",
    connote_cancel: "No",
    customer_id: "80561601",
    customer_name: "TOKOPEDIA PT",
    customer_type: "CORPORATE",
    customer_type_name: "NA PROJECT",
    date_time_discount_calculation: "4-May-24",
    destination_sys_code: "CGK10404",
    discount_amount_awb_number: "0",
    final_connote_pod_created_by: "CGK69204",
    final_connote_pod_status_date_time: "2-May-24",
    final_pod_status_code: "D01",
    final_pod_success_status: "Y",
    flagging_discount_calculation: "Y",
    goods_value: "0",
    grup_parent_id: "_k3BPdmNg",
    id_export: "TLJR3D8J7QY97PEV-_k3BPdmNg",
    invoice_date: "26-Jun-24",
    invoice_number: "CGK/PLSNA/02/2406000018",
    is_cashless: "Yes",
    local_parent_id: "CGKTOKOP0000001",
    local_parent_name: "TOKOPEDIA",
    na_principal: "0",
    econnote_flag: "",
    national_parent_id: "JNETOKOP0000001",
    national_parent_name: "TOKOPEDIA",
    origin_sys_code: "CGK10000",
    original_amount_number: "10000",
    other_charges_number: "0",
    packing_number: "0",
    part: 0,
    quantity: "1",
    service_type: "CTC",
    status_connote: "Invoiced, Delivered to Customer",
    surcharge_number: "0",
    total_amount_after_discount_charges_dpp: "10000",
    total_packing_charges_number: "0",
    updated_destination_code: "CGK10404",
    updated_origin_code: "CGK10000",
    updated_service_type: "CTC23",
    updated_weight_kgs: "1",
    weight_kg: "1",
  },
  {
    adjusted_amount_number: "10000",
    awb_date: "1-May-24",
    awb_number: "'TLJR3D8J7QY97PEV",
    branch_id: "CGK",
    branch_name: "JNE JAKARTA",
    branch_type: "CABANG UTAMA JNE",
    connote_cancel: "No",
    customer_id: "80561601",
    customer_name: "TOKOPEDIA PT",
    customer_type: "CORPORATE",
    customer_type_name: "NA PROJECT",
    date_time_discount_calculation: "4-May-24",
    destination_sys_code: "CGK10404",
    discount_amount_awb_number: "0",
    final_connote_pod_created_by: "CGK69204",
    final_connote_pod_status_date_time: "2-May-24",
    final_pod_status_code: "D01",
    final_pod_success_status: "Y",
    flagging_discount_calculation: "Y",
    goods_value: "0",
    grup_parent_id: "_k3BPdmNg",
    id_export: "TLJR3D8J7QY97PEV-_k3BPdmNg",
    invoice_date: "26-Jun-24",
    invoice_number: "CGK/PLSNA/02/2406000018",
    is_cashless: "Yes",
    local_parent_id: "CGKTOKOP0000001",
    local_parent_name: "TOKOPEDIA",
    na_principal: "0",
    econnote_flag: "Y",
    national_parent_id: "JNETOKOP0000001",
    national_parent_name: "TOKOPEDIA",
    origin_sys_code: "CGK10000",
    original_amount_number: "10000",
    other_charges_number: "0",
    packing_number: "0",
    part: 0,
    quantity: "1",
    service_type: "CTC",
    status_connote: "Invoiced, Delivered to Customer",
    surcharge_number: "0",
    total_amount_after_discount_charges_dpp: "10000",
    total_packing_charges_number: "0",
    updated_destination_code: "CGK10404",
    updated_origin_code: "CGK10000",
    updated_service_type: "CTC23",
    updated_weight_kgs: "1",
    weight_kg: "1",
  },
];

var payload = {
  "counterLocket": 1,
  "dataParameter": {
      "column_type": "Cashless",
      "counterLocket": 1,
      "generateTime": 1728991089731,
      "idLocket": "-7MYEOiNg",
      "idParameter": "_k3BPdmNg",
      "parameterCreate": {
          "_id": "670e4f718e441d23a87ab3ad",
          "awb_date_end": 1714496400000,
          "awb_date_start": 1714410000000,
          "awb_number": [],
          "branch_id_multi": [
              {
                  "id": "CGK",
                  "name": "CGK"
              }
          ],
          "branch_user_created": {
              "id": "ReFNB3fVg",
              "name": "CGK"
          },
          "cod_flag": "",
          "company_id": 230,
          "connote_batching_status": {
              "id": "",
              "name": ""
          },
          "connote_cancel": "",
          "created_at": 1728991089731,
          "created_by": 873,
          "created_by_email": "bcmssuv.riyan@jne.co.id",
          "customer_id": {
              "id": "80561601",
              "name": "80561601 - TOKOPEDIA PT"
          },
          "customer_status": "",
          "customer_type": {
              "id": "",
              "name": ""
          },
          "customer_type_name": {
              "id": "",
              "name": ""
          },
          "destination_branch_id": {
              "id": "",
              "name": ""
          },
          "destination_urban_village_name": "",
          "econnote_flag": "",
          "filter_column_type": {
              "id": "ontQmVCIR",
              "name": "Cashless"
          },
          "flagging_stage": "General AWB Date",
          "id": "_k3BPdmNg",
          "ids": "_k3BPdmNg",
          "insurance_flag": "",
          "invoice_number": [],
          "invoice_number_cod": [],
          "length_batched": 0,
          "local_parent_id": "",
          "management_fee_id": "",
          "management_fee_name": "",
          "na_principal": {
              "id": "",
              "name": ""
          },
          "national_parent_id": "",
          "origin_branch_id": {
              "id": "",
              "name": ""
          },
          "origin_managing_entity_id": "",
          "origin_urban_village_name": "",
          "outbound_manifest_status": "",
          "payment_trf_date_ccnc_end": null,
          "payment_trf_date_ccnc_start": null,
          "pod_success_status": "",
          "pricing_detail_combination_id": "",
          "proforma_invoice_number": [],
          "progress_status": "0 %",
          "query_general": {
              "awb_date_end": 1714496400000,
              "awb_date_start": 1714410000000,
              "branch_id_multi": [
                  {
                      "id": "CGK",
                      "name": "CGK"
                  }
              ],
              "customer_id": {
                  "id": "80561601",
                  "name": "80561601 - TOKOPEDIA PT"
              }
          },
          "query_khusus": {
            "econnote_flag": "N"
          },
          "service_code": [],
          "status_connote": [],
          "status_export": "Ready to Generate",
          "status_report": "Processing",
          "total_connote_process": "60.413",
          "total_connote_process_number": 60413,
          "total_paid_amount": 0,
          "updated_at": 1728991090449,
          "updated_by": 873
      },
      "periodConnoteFrom": 1714410000000,
      "periodConnoteTo": 1714582799999,
      "total_connote": 60413
  },
  "eachHours": {
      "end": 1714557599999,
      "endInText": "1-Mei-2024 16:59",
      "groupDedicated": 1,
      "index": 41,
      "locket": 41,
      "start": 1714554000000,
      "startInText": "1-Mei-2024 16:00"
  },
  "temporaryDateGenerateID": "SzKYEOmHRz"
};

function filterDataConnote(payload, dataConnote) {
  var queryKhusus = payload.dataParameter.parameterCreate.query_khusus;

  if (Object.keys(queryKhusus).length > 0) {
    dataConnote = dataConnote.filter(function (item) {
      return Object.keys(queryKhusus).every(function (key) {
        var queryValue = queryKhusus[key];
        if (Array.isArray(queryValue)) {
          for (var i = 0; i < queryValue.length; i++) {
            if (item[key] === queryValue[i].name) {
              return true;
            }
          }
          return false;
        } else if (typeof queryValue === "object" && queryValue !== null) {
          return item[key] === queryValue.name;
        } else {
          return item[key] === queryValue;
        }
      });
    });
  }

  return dataConnote;
}

dataConnote = filterDataConnote(payload, dataConnote);

console.log(dataConnote[0]);
console.log(dataConnote.length);