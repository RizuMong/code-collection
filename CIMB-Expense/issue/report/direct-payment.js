var transaction = {
  "act_id": "1081",
  "activity": {
      "id": "GNgxvkWIg",
      "name": "< IDR 35 mio Kegiatan Promosi CN [Bankwide] [Jasa]"
  },
  "additional_info": {
      "berita_acaralaporan_pelaksanaan_event_isi_rekap_pelaksanaan_event": [
          {
              "name": "BAST.pdf",
              "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8b651fecc-BAST.pdf"
          },
          {
              "name": "BAST2.pdf",
              "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8b6c502d5-BAST2.pdf"
          }
      ],
      "daftar_hadir_peserta_event_nasabah_partner_wajib_event_untuk_nasabah_terundang": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8b78b49b2-NA.pdf",
      "foto_pelaksanaan_eventgeo_tagging_dan_tanggal_event_atau_keterangan_tempat_dan_waktu_divalidasi_oleh_min_d3_initiator_event": [
          {
              "name": "BUKTI TAYANG.jpg",
              "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8b56b536b-BUKTI-TAYANG.jpg"
          }
      ],
      "nomor_proposal_memo_program": "1159/CB-SLDB/CDSP/VIII/2024",
      "proposal_salesmarketing_event": [
          {
              "name": "Memo 1159 - Sosialisasi Program Cross Selling Tab OCTO Savers Fintech Aug 24.pdf",
              "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8b4ab9214-Memo-1159---Sosialisasi-Program-Cross-Selling-Tab-OCTO-Savers-Fintech-Aug-24.pdf"
          }
      ],
      "surat_perintah_kerja_spk_vendorsurat_penawaran_harga_sales_order_wajib_penyelenggaraan_dengan_vendor": [
          {
              "name": "SPK WABA CIMB Niaga utk harga  update per 1 September-021224 (JATIS 2025)_FIX.pdf",
              "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8b3569a7e-SPK-WABA-CIMB-Niaga-utk-harga-update-per-1-September-021224-(JATIS-2025)_FIX.pdf"
          }
      ],
      "tanggal_akhir_event": 1732899600000,
      "tanggal_mulai_event": 1727715600000,
      "tempat_event": "Nasional"
  },
  "address": {
      "id": "07tUe4nIR",
      "name": "T300003933/000 - JL MAMPANG PRAPATAN NO 3 JAKSEL -  -  -"
  },
  "amount": 14585726,
  "amount_after_penalty": 0,
  "amount_after_penalty_currency": {},
  "amount_origin": 14585726,
  "amount_penalty": null,
  "amount_penalty_currency": {
      "convertion_amount": null,
      "origin_amount": null,
      "origin_currency": null,
      "rate": 1,
      "target_currency": "IDR"
  },
  "approved_by_email": [],
  "approved_by_text": "",
  "attachment_receipt": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8ab0d2e35-INV-30-DEC-24-Bank-CIMB-Niaga-Tbk-010.pdf",
  "bank_account": {
      "id": "8np8647IR",
      "name": "800025666600 - PT INFORMASI TEKNOLOGI INDONESIA - Bank CIMB Niaga"
  },
  "cc_ocr_detected_blocked_content": [],
  "cc_ocr_duplicate_image": [],
  "cc_ocr_duplicate_transaction": [],
  "company_id": 25236,
  "created_at": 1737132927092,
  "created_by": 188247,
  "currency": {
      "convertion_amount": 14585726,
      "origin_amount": 14585726,
      "origin_currency": "IDR",
      "rate": 1,
      "target_currency": "IDR"
  },
  "description": "Pembayaran non event WA Blast Full Payment Periode Oktober s/d November 2024 - Divisi DCSTS",
  "description_lite": "Pembayaran non event WA Blast Full Payment Periode Oktober s/d November 2024 - Divisi DCSTS...",
  "dibuat_oleh": "Ahmad.Fauzi2@cimbniaga.co.id",
  "diedit_oleh": "ahmad.fauzi2@cimbniaga.co.id",
  "div_code": "1611-47077-1055",
  "div_name": "RBP-RDB-Savings Product & Business Solution",
  "document_support_2": [
      {
          "name": "BAST.pdf",
          "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8ab76b95b-BAST.pdf"
      },
      {
          "name": "BAST2.pdf",
          "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8ac504700-BAST2.pdf"
      },
      {
          "name": "LAMPIRAN.pdf",
          "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8ad0cfc84-LAMPIRAN.pdf"
      },
      {
          "name": "BUKTI TAYANG.jpg",
          "url": "https://storage.googleapis.com/prod-wtyvmadi/25236/678a8adc9eff9-BUKTI-TAYANG.jpg"
      }
  ],
  "duplicate_image": "Duplicated Detected",
  "duplicate_transaction": "Duplicated Detected",
  "email_initiator": "Ahmad.Fauzi2@cimbniaga.co.id",
  "exchange_rate": 1,
  "flag_from_rejected": "false",
  "flow_id": 509271358,
  "flow_status": "sent",
  "id": "ymZOFjDNR",
  "id_direct_payment": "ymZOFjDNR",
  "id_key": 104290,
  "initiator_name": "AHMAD FAUZI ",
  "invoice_date": 1735491600000,
  "invoice_number": "30/10/I/INV/1224",
  "multiple_activity": [
      {
          "more_activity": {
              "id": "",
              "name": ""
          }
      }
  ],
  "nik": "5419568",
  "note": "",
  "number_format": "",
  "ocr_amount_status_tags": {
      "background": "#00ff11",
      "font_color": "#ffffff",
      "name": "Match"
  },
  "ocr_amount_value": 14585726,
  "ocr_detected_blocked_content_value": [],
  "ocr_detected_blocked_content_value_text": "",
  "ocr_duplicate_image_similarity_percentage": [],
  "ocr_duplicate_image_similarity_percentage_text": "",
  "ocr_duplicate_image_suspect_ref_id": [],
  "ocr_duplicate_image_suspect_ref_id_text": "",
  "ocr_duplicate_image_transaction_type": [],
  "ocr_duplicate_image_transaction_type_text": "",
  "ocr_duplicate_transaction_suspect_ref_id": [],
  "ocr_duplicate_transaction_suspect_ref_id_text": "",
  "ocr_duplicate_transaction_transaction_type": [],
  "ocr_duplicate_transaction_transaction_type_text": "",
  "ocr_invoice_bank_account_number_status_tags": {
      "background": "#ff0000",
      "font_color": "#ffffff",
      "name": "Not Match"
  },
  "ocr_invoice_bank_account_number_value": "",
  "ocr_invoice_date_status_tags": {
      "background": "#00ff11",
      "font_color": "#ffffff",
      "name": "Match"
  },
  "ocr_invoice_date_value": 1735516800000,
  "ocr_invoice_number_status_tags": {
      "background": "#00ff11",
      "font_color": "#ffffff",
      "name": "Match"
  },
  "ocr_invoice_number_value": "30/10/I/INV/1224",
  "ocr_summary_status": "Suspected",
  "origin_currency": "IDR",
  "payment_amount": 14322920.46,
  "payment_amount_currency": {
      "convertion_amount": 14322920.46,
      "origin_amount": 14322920.46,
      "origin_currency": "IDR",
      "rate": 1,
      "target_currency": "IDR"
  },
  "penalty": false,
  "position": {
      "id": "cvbkVdDNg",
      "name": "5419568-Marketing Communication Executive - Consumer Deposit Activation"
  },
  "reimbursed_at": null,
  "rejected_by_email": [],
  "rejected_by_text": "",
  "sl_desc": "ADVERTISEMENT PROMOTION BANKWIDE",
  "sl_id": "206",
  "status_content_blocker": "No blocked content Detected",
  "sub_ledger": "map[id:x9XHFgWIR name:5410053-0000-00000]",
  "subledger": {
      "id": "x9XHFgWIR",
      "name": "5410053-0000-00000"
  },
  "target_currency": "IDR",
  "tax_field_document": [
      {
          "tax_document": {
              "id": "WDx4TkWIR",
              "name": "FAKTUR PAJAK 11%"
          }
      }
  ],
  "total_smartform": 14585726,
  "total_source_of_fund": 13140294,
  "total_source_of_fund_and_tax": 14585726,
  "total_source_of_fund_and_tax_currency": {
      "convertion_amount": 14585726,
      "origin_amount": 14585726,
      "origin_currency": "IDR",
      "rate": 1,
      "target_currency": "IDR"
  },
  "total_source_of_fund_currency": {
      "convertion_amount": 13140294,
      "origin_amount": 13140294,
      "origin_currency": "IDR",
      "rate": 1,
      "target_currency": "IDR"
  },
  "total_source_of_fund_origin": 13140294,
  "type": "Direct Payment",
  "updated_at": 1737133394998,
  "updated_by": 188247,
  "vendor": {
      "id": "0Gt8eV7Ig",
      "name": "PT INFORMASI TEKNOLOGI INDONESIA-CN-800025666600"
  },
  "vendor_bank_account": "800025666600",
  "vendor_id_key": "5069"
};

var data_duplicate_image = [
  {
    "company_id": 25236,
    "created_at": 1737133350153,
    "created_by": 188247,
    "duplicate_transaction_id_key": 103554,
    "duplicate_transaction_ids": [
        "DPAXRUDNR"
    ],
    "duplicate_transaction_type": "Direct Payment",
    "id": "vHRyFCDHR",
    "id_ocr_duplicate_image": "vHRyFCDHR",
    "isnative": "0",
    "similarity": 100,
    "transaction_id": {
        "id": "ymZOFjDNR",
        "name": "104290"
    },
    "transaction_type": "Direct Payment",
    "updated_at": 1737133350153,
    "updated_by": 188247
}
]
var data_duplicate_transaction = []
var data_detected_blocked_content = []

function _log(msg) {
  console.log(msg);
};

var ocr = {
"cc_ocr_duplicate_image": [],
"cc_ocr_duplicate_transaction": [],
"cc_ocr_detected_blocked_content": [],
"ocr_detected_blocked_content_value": [],
"ocr_duplicate_image_similarity_percentage": [],
"ocr_duplicate_image_suspect_ref_id": [],
"ocr_duplicate_image_transaction_type": [],
"ocr_duplicate_transaction_suspect_ref_id": [],
"ocr_duplicate_transaction_transaction_type": [],
}

data_duplicate_image.forEach(function (item, i) {
    var id_key = String(item.duplicate_transaction_id_key)
    var transaction_type = String(item.duplicate_transaction_type)
    var similarity = (item.similarity || 0).toFixed(2)
    if (i < 3) {
        var obj = {}
        obj.duplicate_transaction_id_key = id_key
        obj.duplicate_transaction_type = transaction_type
        transaction.cc_ocr_duplicate_image.push(obj)
    }
    ocr.ocr_duplicate_image_suspect_ref_id.push(id_key)
    ocr.ocr_duplicate_image_transaction_type.push(transaction_type)
    ocr.ocr_duplicate_image_similarity_percentage.push(similarity)
})

data_duplicate_transaction.forEach(function (item, i) {
    var id_key = String(item.duplicate_transaction_id_key)
    var transaction_type = String(item.duplicate_transaction_type)
    if (i < 3) {
        var obj = {}
        obj.duplicate_transaction_id_key = id_key
        obj.duplicate_transaction_type = transaction_type
        transaction.cc_ocr_duplicate_transaction.push(obj)
    }
    ocr.ocr_duplicate_transaction_suspect_ref_id.push(id_key)
    ocr.ocr_duplicate_transaction_transaction_type.push(transaction_type)
})

data_detected_blocked_content.forEach(function (item, i) {
    var value = String(item.value)
    if (i < 3) {
        var obj = {}
        obj.value = value
        transaction.cc_ocr_detected_blocked_content.push(obj)
    }
    transaction.ocr_detected_blocked_content_value.push(value)
})

transaction.ocr_detected_blocked_content_value_text = transaction.ocr_detected_blocked_content_value.join('^')
transaction.ocr_duplicate_image_similarity_percentage_text = transaction.ocr_duplicate_image_similarity_percentage.join('^')
transaction.ocr_duplicate_image_suspect_ref_id_text = transaction.ocr_duplicate_image_suspect_ref_id.join('^')
transaction.ocr_duplicate_image_transaction_type_text = transaction.ocr_duplicate_image_transaction_type.join('^')
transaction.ocr_duplicate_transaction_suspect_ref_id_text = transaction.ocr_duplicate_transaction_suspect_ref_id.join('^')
transaction.ocr_duplicate_transaction_transaction_type_text = transaction.ocr_duplicate_transaction_transaction_type.join('^')

_log(transaction);