var payload = {
  bank_account_number: 12312666622222,
  company_id: 25236,
  created_at: 1722400471166,
  created_by: 166467,
  email: "jannah@mailinator.com",
  employee_code: "114448888115",
  flagging_process: "Ready to Process",
  id: "qWIFD49Ig",
  id_parent: "vOO9749IR",
  identity_number: "567890666222222",
  ids: "qWIFD49Ig",
  stage_status: "Update Employee",
  staging_employee_id: "vOO9749IR",
  updated_at: 1722400471166,
  updated_by: 166467,
};

var dataKTP = [
  {
    address: "CIMB Niaga",
    bank_account_branch: "BRANCH",
    bank_account_holder_name: "Billy",
    bank_account_number: "123126666222228",
    bank_name: {
      id: "12345",
      name: "PT Bank CIMB Niaga TBK",
    },
    company_id: 25236,
    company_user_id: 166989,
    country: "Indonesia",
    created_at: 1722400475985,
    created_by: 166467,
    date_of_birth: -102754800000,
    dibuat_oleh: "integrasi.yoda@mailinator.com",
    diedit_oleh: "integrasi.yoda@mailinator.com",
    directorate: "Strategy, Finance & SPAPM ID",
    email: "siti@mailinantor.com",
    employee_code: "114448888111",
    employee_status: "ACTIVE",
    employment_type: "PERMANENT",
    first_name: "",
    full_name: " Siti",
    gender: "Female",
    grade: "U10",
    id: "J_FKv4rSR",
    id_key: 285,
    id_master_employee: "J_FKv4rSR",
    identity_number: "567890666222222",
    last_name: "Siti",
    marital_status: "SINGLE",
    non_employee_yoda: false,
    officebase_location: "Kantor Pusat - Griya Niaga 1",
    password: "12345",
    place_of_birth: "Sukabumi",
    post_code: 13720,
    state: "DKI Jakarta",
    sub_directorate: "Strategic Procurement & Admin Property Management ID",
    tax_identification_number: "7.05952E+11",
    updated_at: 1722400475997,
    updated_by: 166467,
  },
  {
    address: "CIMB Niaga",
    bank_account_branch: "BRANCH",
    bank_account_holder_name: "Billy",
    bank_account_number: "123126666222228",
    bank_name: {
      id: "12345",
      name: "PT Bank CIMB Niaga TBK",
    },
    company_id: 25236,
    company_user_id: 166989,
    country: "Indonesia",
    created_at: 1722400475985,
    created_by: 166467,
    date_of_birth: -102754800000,
    dibuat_oleh: "integrasi.yoda@mailinator.com",
    diedit_oleh: "integrasi.yoda@mailinator.com",
    directorate: "Strategy, Finance & SPAPM ID",
    email: "siti@mailinantor.com",
    employee_code: "114448888111",
    employee_status: "ACTIVE",
    employment_type: "PERMANENT",
    first_name: "",
    full_name: " Siti",
    gender: "Female",
    grade: "U10",
    id: "J_FKv4rSR",
    id_key: 285,
    id_master_employee: "J_FKv4rSR",
    identity_number: "567890666222222",
    last_name: "Siti",
    marital_status: "SINGLE",
    non_employee_yoda: false,
    officebase_location: "Kantor Pusat - Griya Niaga 1",
    password: "12345",
    place_of_birth: "Sukabumi",
    post_code: 13720,
    state: "DKI Jakarta",
    sub_directorate: "Strategic Procurement & Admin Property Management ID",
    tax_identification_number: "7.05952E+11",
    updated_at: 1722400475997,
    updated_by: 166467,
  },
];

var dataNIK = [
  {
    address: "CIMB Niaga",
    bank_account_branch: "BRANCH",
    bank_account_holder_name: "Billy",
    bank_account_number: "123126666222228",
    bank_name: {
      id: "12345",
      name: "PT Bank CIMB Niaga TBK",
    },
    company_id: 25236,
    company_user_id: 166989,
    country: "Indonesia",
    created_at: 1722400475985,
    created_by: 166467,
    date_of_birth: -102754800000,
    dibuat_oleh: "integrasi.yoda@mailinator.com",
    diedit_oleh: "integrasi.yoda@mailinator.com",
    directorate: "Strategy, Finance & SPAPM ID",
    email: "siti@mailinantor.com",
    employee_code: "114448888115",
    employee_status: "ACTIVE",
    employment_type: "PERMANENT",
    first_name: "",
    full_name: " Siti",
    gender: "Female",
    grade: "U10",
    id: "J_FKv4rSR",
    id_key: 285,
    id_master_employee: "J_FKv4rSR",
    identity_number: "567890666222267",
    last_name: "Siti",
    marital_status: "SINGLE",
    non_employee_yoda: false,
    officebase_location: "Kantor Pusat - Griya Niaga 1",
    password: "12345",
    place_of_birth: "Sukabumi",
    post_code: 13720,
    state: "DKI Jakarta",
    sub_directorate: "Strategic Procurement & Admin Property Management ID",
    tax_identification_number: "7.05952E+11",
    updated_at: 1722400475997,
    updated_by: 166467,
  },
];

var dataBank = [
  {
    address: "CIMB Niaga",
    bank_account_branch: "BRANCH",
    bank_account_holder_name: "Billy",
    bank_account_number: "12312666622222",
    bank_name: {
      id: "12345",
      name: "PT Bank CIMB Niaga TBK",
    },
    company_id: 25236,
    company_user_id: 166989,
    country: "Indonesia",
    created_at: 1722400475985,
    created_by: 166467,
    date_of_birth: -102754800000,
    dibuat_oleh: "integrasi.yoda@mailinator.com",
    diedit_oleh: "integrasi.yoda@mailinator.com",
    directorate: "Strategy, Finance & SPAPM ID",
    email: "siti@mailinantor.com",
    employee_code: "114448888115",
    employee_status: "ACTIVE",
    employment_type: "PERMANENT",
    first_name: "",
    full_name: " Siti",
    gender: "Female",
    grade: "U10",
    id: "J_FKv4rSR",
    id_key: 285,
    id_master_employee: "J_FKv4rSR",
    identity_number: "567890666222267",
    last_name: "Siti",
    marital_status: "SINGLE",
    non_employee_yoda: false,
    officebase_location: "Kantor Pusat - Griya Niaga 1",
    password: "12345",
    place_of_birth: "Sukabumi",
    post_code: 13720,
    state: "DKI Jakarta",
    sub_directorate: "Strategic Procurement & Admin Property Management ID",
    tax_identification_number: "7.05952E+11",
    updated_at: 1722400475997,
    updated_by: 166467,
  },
];

function checkDuplicates(payload, dataKTP, dataNIK, dataBank) {
  var duplicates = [];

  var ktpCount = 0;
  for (var i = 0; i < dataKTP.length; i++) {
    if (dataKTP[i].identity_number === payload.identity_number) {
      ktpCount++;
    }
  }
  if (ktpCount > 1) {
    duplicates.push("KTP");
  }

  var nikCount = 0;
  for (var j = 0; j < dataNIK.length; j++) {
    if (dataNIK[j].employee_code === payload.employee_code) {
      nikCount++;
    }
  }
  if (nikCount > 1) {
    duplicates.push("NIK");
  }

  var bankCount = 0;
  for (var k = 0; k < dataBank.length; k++) {
    if (dataBank[k].bank_account_number === payload.bank_account_number.toString()) {
      bankCount++;
    }
  }
  if (bankCount > 1) {
    duplicates.push("Bank");
  }

  if (duplicates.length > 0) {
    return {
      status: "error",
      message: "Data Duplicate",
      note: "Duplicate Data " + duplicates.join(" & "),
    };
  } else {
    return {
      status: "success",
      message: "Data Valid",
    };
  }
}

console.log(checkDuplicates(payload, dataKTP, dataNIK, dataBank));
