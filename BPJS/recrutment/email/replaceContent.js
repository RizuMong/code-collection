var getTalentaCandidateDetail = {
  "data": {
      "application_date": "2025-04-16T13:12:37Z",
      "blood_type_id": 0,
      "blood_type_name": "",
      "citizen_id_address": "",
      "current_salary": 0,
      "date_of_birth": "2025-04-15 00:00:00",
      "email": "chris+03@mekari.com",
      "expected_salary": 0,
      "first_name": "Paul ",
      "formal_education": null,
      "gender_id": 0,
      "gender_name": "",
      "hiring_stage_id": 10046,
      "informal_education": null,
      "is_portfolio_online": false,
      "job_application_id": 45217,
      "job_id": 5191,
      "last_company": "",
      "last_education": 0,
      "last_job_position": "",
      "last_name": "Scholes",
      "marital_status_id": 0,
      "marital_status_name": "",
      "nik": "7811999912310001",
      "passport_expiration_date": null,
      "passport_number": "",
      "phone_number": "098177771111",
      "place_of_birth": "Jakarta",
      "portfolio": "",
      "postal_code": "",
      "profile_picture": "",
      "question": [
          {
              "answer": "https://rekrutmen.bpjs-kesehatan.go.id/karir/",
              "custom_field_id": 0,
              "id": 9087,
              "question": "Link"
          },
          {
              "answer": "Pas5w0rd",
              "custom_field_id": 0,
              "id": 9088,
              "question": "Password"
          },
          {
              "answer": "00002",
              "custom_field_id": 0,
              "id": 9093,
              "question": "No Registrasi"
          },
          {
              "answer": "2025",
              "custom_field_id": 0,
              "id": 9094,
              "question": "Tahun"
          },
          {
              "answer": "Jumat",
              "custom_field_id": 0,
              "id": 9089,
              "question": "Hari"
          },
          {
              "answer": "Desember",
              "custom_field_id": 0,
              "id": 9090,
              "question": "Bulan"
          },
          {
              "answer": "13:00",
              "custom_field_id": 0,
              "id": 9091,
              "question": "Jam"
          },
          {
              "answer": "Operational",
              "custom_field_id": 0,
              "id": 9092,
              "question": "Program"
          },
          {
              "answer": "Rabu",
              "custom_field_id": 0,
              "id": 9095,
              "question": "Shift"
          },
          {
              "answer": "14:00",
              "custom_field_id": 0,
              "id": 9096,
              "question": "Waktu Test Online"
          },
          {
              "answer": "Rabu",
              "custom_field_id": 0,
              "id": 9097,
              "question": "Shift Test Online"
          },
          {
              "answer": "https://rekrutmen.bpjsketenagakerjaan.go.id/#/",
              "custom_field_id": 0,
              "id": 9098,
              "question": "Link Test Online"
          },
          {
              "answer": "https://talenta.oss-ap-southeast-5.aliyuncs.com/upload%2Fanswer%2FScreenshot_2025-04-16_at_13.53.38_aYIYgW.png?Expires=1744820847&OSSAccessKeyId=LTAI5tD9oHeS5N4YrDECTwhC&Signature=%2B8mU6YR13vbdm4FETjAMnOSj%2FxI%3D",
              "custom_field_id": 0,
              "id": 9099,
              "question": "Ijazah"
          }
      ],
      "religion_id": 0,
      "religion_name": "",
      "residential_address": "",
      "resume": "https://talenta.oss-ap-southeast-5.aliyuncs.com/upload%2Fresume%2FScreenshot_2025-04-16_at_13.53.38_ZgG0f3.png?Expires=1744820847&OSSAccessKeyId=LTAI5tD9oHeS5N4YrDECTwhC&Signature=kUS0jxngbaRRDCv48yC6Wvh57mM%3D",
      "sensitive_field_access": true,
      "status": 0,
      "tags": null,
      "work_experience": null
  },
  "message": "Successfully get candidate application"
};

var getDataRedaksi = {
  "company_id": 27414,
  "created_at": 1744788406997,
  "created_by": 178566,
  "data_mapping": [
      {
          "data": "No Registrasi",
          "tag": "TAG_NO_REGISTRASI"
      },
      {
          "data": "Password",
          "tag": "TAG_PASSWORD"
      },
      {
          "data": "Hari",
          "tag": "TAG_WAKTU"
      },
      {
          "data": "Shift",
          "tag": "TAG_SHIFT"
      },
      {
          "data": "Jam",
          "tag": "TAG_JAM"
      },
      {
          "data": "Link Test Online",
          "tag": "TAG_LINK"
      },
      {
          "data": "Hari",
          "tag": "TAG_HARI_INI"
      }
  ],
  "id": "lNRwpEVYq2A9iP9S",
  "id_redaction": "lNRwpEVYq2A9iP9S",
  "kode": "18",
  "konten": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n  <head>\r\n    <meta charset=\"UTF-8\" />\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n    <title>\r\n      Pengumuman Jadwal Tes Online Rekrutmen dan Seleksi BPJS Ketenagakerjaan\r\n    </title>\r\n  </head>\r\n  <body>\r\n    <table style=\"width: 100%\" border=\"0\">\r\n      <tbody>\r\n        <tr>\r\n          <td style=\"width: 50%\" align=\"left\" valign=\"middle\">\r\n            <p>\r\n              <span style=\"color: #000000; font-size: x-large\"\r\n                ><strong\r\n                  ><img\r\n                    src=\"http://officeless-bpjs-prod-public.oss-ap-southeast-5.aliyuncs.com/27414/67ffd6725db74-bpjs-ketenagakerjaan-seeklogo.png\"\r\n                    alt=\"\"\r\n                    width=\"350\"\r\n                    height=\"80\" /></strong\r\n              ></span>\r\n            </p>\r\n          </td>\r\n          <td style=\"width: 50%\" align=\"right\" valign=\"middle\">\r\n            <img\r\n              src=\"http://officeless-bpjs-prod-public.oss-ap-southeast-5.aliyuncs.com/27414/67ffd6725db74-bpjs-ketenagakerjaan-seeklogo.png\"\r\n              alt=\"\"\r\n              width=\"350\"\r\n              height=\"75\"\r\n            /><br />\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <hr />\r\n    <p><strong>Peserta Yth.,</strong><br /><br /></p>\r\n    <p>&nbsp;</p>\r\n    <table style=\"width: 350px\" border=\"0\">\r\n      <tbody>\r\n        <tr>\r\n          <td style=\"width: 100px\"><strong>Nama</strong></td>\r\n          <td><strong>:</strong></td>\r\n          <td><strong>TAG_NAMA_LENGKAP</strong></td>\r\n        </tr>\r\n        <tr>\r\n          <td><strong>No Registrasi</strong><br /></td>\r\n          <td><strong>:</strong></td>\r\n          <td><strong>TAG_NO_REGISTRASI</strong></td>\r\n        </tr>\r\n        <tr>\r\n          <td><strong>Password</strong></td>\r\n          <td><strong>:</strong></td>\r\n          <td><strong>TAG_PASSWORD</strong></td>\r\n        </tr>\r\n        <tr>\r\n          <td><strong>KTP</strong></td>\r\n          <td><strong>:</strong></td>\r\n          <td><strong>TAG_NIK</strong></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <p>&nbsp;</p>\r\n    <p>\r\n      Anda berhak mengikuti seleksi tahap berikutnya yaitu Tes Online yang akan\r\n      diselenggarakan pada:\r\n    </p>\r\n    <table style=\"width: 350px\" border=\"0\">\r\n      <tbody>\r\n        <tr>\r\n          <td style=\"width: 100px\"><strong>Hari/ Tanggal</strong></td>\r\n          <td><strong>:</strong></td>\r\n          <td><strong>TAG_WAKTU</strong></td>\r\n        </tr>\r\n        <tr>\r\n          <td><strong>Shift/Jam</strong></td>\r\n          <td><strong>:</strong></td>\r\n          <td><strong>TAG_SHIFT, TAG_JAM</strong></td>\r\n        </tr>\r\n        <tr>\r\n          <td><strong>Link Tes Online</strong></td>\r\n          <td><strong>:</strong></td>\r\n          <td><strong>TAG_LINK</strong></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <p><br /><br />Hal-hal yang perlu Anda perhatikan :</p>\r\n    <table border=\"0\" width=\"610\" height=\"168\">\r\n      <tbody>\r\n        <tr>\r\n          <td style=\"width: 20px\" align=\"left\" valign=\"top\">1.</td>\r\n          <td>\r\n            Anda diwajibkan memberitahukan penetapan jadwal shift kepada\r\n            Pengawas Tes Online yang ditetapkan oleh Unit Kerja Anda.\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td style=\"width: 20px\" align=\"left\" valign=\"top\">2.</td>\r\n          <td>\r\n            Pelaksanaan Tes Online wajib dilakukan di Unit Kerja (Kantor\r\n            Pusat/Kantor Wilayah/Kantor Cabang) tempat Anda bekerja dengan\r\n            pengawasan sebagaimana disebut dalam butir 1 (satu) di atas.\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td style=\"width: 20px\" align=\"left\" valign=\"top\">3.</td>\r\n          <td>\r\n            Anda baru bisa mengakses Website Tes Online tersebut pada durasi\r\n            waktu sesuai Shift/Jam yang ditetapkan.\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td style=\"width: 20px\" align=\"left\" valign=\"top\">4.</td>\r\n          <td>\r\n            Anda diwajibkan mengirimkan (submit) semua jawaban sebelum durasi\r\n            waktu Shift yang ditetapkan berakhir (Lihat Shift/durasi waktu di\r\n            atas). Keterlambatan submit akan mengakibatkan Anda secara otomatis\r\n            gugur dalam tahap ini.\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <p><br /><br />Terima kasih<br />Jakarta, TAG_HARI_INI</p>\r\n    <p>\r\n      <br /><strong>Penyelenggara Rekrutmen</strong><br /><strong\r\n        >SDM BPJS Ketenagakerjaan.</strong\r\n      >\r\n    </p>\r\n  </body>\r\n</html>",
  "subject_email": "Pengumuman Jadwal Tes Online Rekrutmen dan Seleksi BPJS Ketenagakerjaan",
  "tahapan_rekrutmen_id": {
      "id": "uhbLowjTPKbk20gi",
      "name": "Screening CV"
  },
  "updated_at": 1744819905604,
  "updated_by": 178566
};

function _log(msg) {
  console.log(msg);
};

function findAnswerByQuestion(questionText, candidateData) {
  for (var i = 0; i < candidateData.data.question.length; i++) {
    if (candidateData.data.question[i].question === questionText) {
      return candidateData.data.question[i].answer;
    }
  }
  return '';
}

var dataReplaces = [];

for (var i = 0; i < getDataRedaksi.data_mapping.length; i++) {
  var mapping = getDataRedaksi.data_mapping[i];
  var questionText = mapping.data;
  var tagToReplace = mapping.tag;
  var answerValue = findAnswerByQuestion(questionText, getTalentaCandidateDetail);
  
  dataReplaces.push({
    string_before: tagToReplace,
    string_after: answerValue
  });
}

var HTML_CONTENT = getDataRedaksi.konten;

for (var j = 0; j < dataReplaces.length; j++) {
  _log(dataReplaces[j].string_before + " -> " + dataReplaces[j].string_after);
  HTML_CONTENT = HTML_CONTENT.split(dataReplaces[j].string_before).join(dataReplaces[j].string_after);
}

// _log(HTML_CONTENT);